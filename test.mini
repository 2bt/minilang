

# inline asm
qword_at():
	asm:
		mov rax, QWORD PTR [rdi + rsi * 8]

byte_at():
	asm:
		mov		cl, BYTE PTR [rdi + rsi]
		movzx	rax, cl

# we can't declare local variables yet
main(argc, argv, x, y):

	printf("type in a number\n");
	x = malloc(100)
	y = atoi(gets(x))
	free(x)
	printf("%d * 3 = %d\n", y, y * 3)

	if !y:
		printf("y is zero\n")
	elif !y - 2:
		printf("y is two\n")
	else:
		puts("foobar")

	return 0

